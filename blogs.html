<!doctype html>
<html lang="en">

<head>
   <title>21880144 - Web1 Project</title>
   <!-- Required meta tags -->
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
   <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">

   <!-- Bootstrap CSS v5.2.1 -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous" />
   <link rel="preconnect" href="https://fonts.googleapis.com">
   <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
   <link href="https://fonts.googleapis.com/css2?family=Changa+One&display=swap" rel="stylesheet">
   <script src="https://kit.fontawesome.com/464cf3643e.js" crossorigin="anonymous"></script>
   <link rel="stylesheet" href="./css/21880144.css">
</head>

<body>
   <!-- header -->
   <header class="container">
      <nav class="navbar navbar-expand-sm navbar-light">
         <a class="navbar-brand" href="index.html">
            <img src="images/logo.png" alt="">
         </a>
         <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#menu-header"
            aria-controls="menu-header" aria-expanded="false" aria-label="Toggle navigation"></button>
         <div class="collapse navbar-collapse" id="menu-header">
            <ul class="navbar-nav ms-auto mt-2 mt-lg-0 ">
               <li class="nav-item">
                  <a class="nav-link" href="index.html" aria-current="page">Home <span
                        class="visually-hidden">(current)</span></a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="about.html">About</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="gallery.html">Gallery</a>
               </li>
               <li class="nav-item active">
                  <a class="nav-link" href="blogs.html">Blogs</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="contacts.html">Contracts</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link linkLogin" data-bs-toggle="modal" data-bs-target="#modalLogin">Login</a>
                  <a class="nav-link linkLogout" href="#" onclick="logout()" style="display: none">Logout</a>
               </li>
            </ul>
            <form class="d-flex my-2 my-lg-0 border rounded-pill" id="formsearch">
               <input class="form-control ms-3 border-0" type="text" placeholder="Search">
               <button class="btn my-2 my-sm-0 border-0" type="submit">
                  <i class="fa fa-solid fa-magnifying-glass "></i>
               </button>
            </form>
         </div>
      </nav>
   </header>
   <!-- end header -->
   <!-- body -->
   <section id="banner-small"></section>
   <div id="content">
      <section class="container py-5">
         <div class="row">
            <div class="col-8" id="blog">
            </div>
            <div class="col-4" id="blogs-categories"> </div>
         </div>
      </section>
   </div>
   <!-- end body -->
   <!-- footer -->
   <footer class="text-center contaiter-fluid text-white py-3">
      <ul class="nav justify-content-center py-3" id="menu-footer">
         <li class="nav-item">
            <a class="nav-link" href="index.html" aria-current="page">Home</a>
         </li>
         <li class="nav-item">
            <a class="nav-link" href="about.html">About</a>
         </li>
         <li class="nav-item">
            <a class="nav-link" href="gallery.html">Gallery</a>
         </li>
         <li class="nav-item">
            <a class="nav-link active" href="blogs.html">Blogs</a>
         </li>
         <li class="nav-item">
            <a class="nav-link" href="contacts.html">Contact</a>
         </li>
         <li class="nav-item">
            <a class="nav-link linkLogin" href="#" data-bs-toggle="modal" data-bs-target="#modalLogin">Login</a>
            <a class="nav-link linkLogout" href="#" onclick="logout()" style="display: none">Logout</a>
         </li>
      </ul>
      <p class="text-white-50">
         Copyright &copy; 2022 by Lê Nguyễn Thanh Thùy - 21880144
      </p>
   </footer>
   <!-- end footer -->


   <!-- modal -->
   <div class="modal fade" id="modalLogin" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false"
      role="dialog" aria-labelledby="modalTitleId" aria-hidden="true">
      <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md" role="document">
         <div class="modal-content">
            <div class="modal-header">
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
               <form action="#" method="post" id="formLogin" onsubmit="login(event)">
                  <h3 class="text-center">Login Form</h3>
                  <div class="mb-3">
                     <input type="text" name="username" id="username" placeholder="Username" class="form-control"
                        required>
                  </div>
                  <div class="mb-3">
                     <input type="password" name="password" id="password" placeholder="Password" class="form-control"
                        required>
                  </div>
                  <button type="submit" class="form-control btn">Login</button>
               </form>
            </div>
            <div class="modal-footer justify-content-center">
               <div class="text-danger" id="errorMessage"></div>
            </div>
         </div>
      </div>
   </div>

   <!-- Optional: Place to the bottom of scripts -->
   <script>
      const myModal = new bootstrap.Modal(document.getElementById('modalId'), options)
   </script>
   <!-- end modal -->
   <!--  -->
   <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3" crossorigin="anonymous">
      </script>
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js"
      integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous">
      </script>
   <!-- handlebag -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.7.7/handlebars.min.js"
      integrity="sha512-RNLkV3d+aLtfcpEyFG8jRbnWHxUqVZozacROI4J2F1sTaDqo1dPQYs01OMi1t1w9Y2FdbSCDSQ2ZVdAC8bzgAg=="
      crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   <script src="js/handlebars-pagination-helper.js"></script>
   <script src="js/21880144.js"></script>
   <!-- blogs categories-->
   <script id="blogs-categories-template" type="text/x-handlebars-template">
      <h1>Categories</h1>
      <ul class="py-3">
         {{#each data}}
            <li><a href="#" class="text-black-50 text-decoration-none" onclick="loadDataJson('blogs/categories/{{id}}', 'blogs-template', 'blog')">{{name}}</a></li>
         {{/each}}
      </ul>
   </script>
   <!-- end blogs categories-->
   <!-- blogs categories-->
   <script id="blogs-template" type="text/x-handlebars-template">
      <h1>Blogs</h1>
      {{#each data}}
         <div class="clearfix py-3">
            <h3>{{name}}</h3>
            <p class="text-black-50">by {{author}} in 
               <a href="#" onclick="loadDataJson('blogs/categories/{{category.id}}', 'blogs-template', 'blog')">{{category.name}} </a>
               on {{formatDate date}} 
               <a href="#" onclick="loadDataDetail('{{id}}',true)">Comments {{comment.length}}</a>
            </p>
            <div>
               <img src="{{thumbpath}}" alt="{{name}}" class="float-start me-3 border rounded-4">
                  <p class="text-black-50">{{summary}}</p>
                     <a href="#" class="btn btn-link readmore ps-0" onclick="loadDataDetail('{{id}}')">Read more</a>
            </div>
         </div>
      {{/each}}
      {{#pagination currentPage pageCount}}
         <nav aria-label="Page navigation">
            <ul class="pagination">
               {{#each pages}}
                  {{#if isCurrent}}
                     <li class="page-item disabled " aria-current="page">
                        <a class="page-link" href="#" onclick="loadDataJson('{{../../request}}', 'blogs-template', 'blog','{{page}}');">{{page}}</a>
                     </li>
                  {{/if}}
                  {{#unless isCurrent}}
                     <li class="page-item">
                        <a class="page-link" href="#" onclick="loadDataJson('{{../../request}}', 'blogs-template', 'blog','{{page}}');">{{page}}</a>
                     </li>
                  {{/unless}}
               {{/each}}
            </ul>
         </nav>
         {{/pagination}}
   </script>
   <!-- end blogs categories-->
   <!-- detail  -->
   <script id="details-template" type="text/x-handlebars-template">
         <h1>Blogs</h1>
            {{#each data}}
               <div class="py-3">
                  <h3>{{name}}</h3>
                  <p class="text-black-50">by {{author}} in 
                     <a href="#" onclick="loadDataJson('blogs/categories/{{category.id}}', 'blogs-template', 'blog')">{{category.name}} </a>
                     on {{formatDate date}} 
                     <a href="#comments">Comments ({{comment.length}})</a>
                  </p>
                  <img src="{{imagepath}}" alt="{{name}}" class="float-start rounded-4 me-3 ">
                  <div class="text-black-50">{{{description}}}</div>
               </div>
               <div class="py-3">
                  <h3>Leave your commnents <br/>Post comment as a guest</h3>
                  <form action="#" method="post" class="text-black-50">
                     <div class="row">
                        <div class="col-4">
                           <div class="mb-3">
                              <label for="name" class="form-label">Name (Required)</label>
                              <input type="text" class="form-control" name="name" id="name" placeholder="" required>
                           </div>
                        </div>
                        <div class="col-4">
                           <div class="mb-3">
                              <label for="email" class="form-label">Email</label>
                              <input type="text" class="form-control" name="email" id="email" placeholder="" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$">
                           </div>
                        </div>
                     </div>
                     <div>
                        <div class="mb-3">
                           <textarea class="form-control" name="message" id="message" rows="3" placeholder="Enter your message" required></textarea>
                        </div>
                     </div>
                     <div class="row">
                        <div class="col">
                           <div class="form-check form-check-inline">
                              <input class="form-check-input" type="checkbox" id="agree" name="agree" value="1" required>
                              <label class="form-check-label" for="agree">Agree to terms ans conditions</label>
                           </div>
                        </div>
                        <div class="col text-end">
                           <button type="submit" class="btn btn-link my-0 py-9">Submit Comment</button>
                        </div>
                     </div>
                  </form>
               </div>
               <a name="comments"></a>
               <div class="bg-dark text-white-50 p-2">
                  COMMENTS ({{comments.length}})
               </div>
               <div class="py-3 text-black-50">
                  {{#each comments}}
                     <div>
                        <p>{{author}}</p>
                        <div>
                           <p>{{name}} - {{formatDate date}}</p>
                           <p>{{summary}}</p>
                        </div>
                     </div>
                     <hr/>
                  {{/each}}
               </div>
            {{/each}}
      </script>
   <!-- end detail -->
   <script>
      checkLogin();
      loadData('blogs-categories', 'blogs-categories-template', 'blogs-categories');
      loadDataJson('blogs', 'blogs-template', 'blog');
      Handlebars.registerHelper('formatDate', function (date) {
         let formatDate = new Date(date);
         let option = {
            weekday: 'short',
            year: 'numeric',
            month: 'short',
            day: 'numeric',
            timeZoneName: 'short',
         };
         return formatDate.toLocaleString('en-Us', option)
      });
      async function loadDataDetail(blogId, gotoComments = false) {
         await loadData(`blogs/${blogId}`, 'details-template', 'blog');
         if (gotoComments) {
            window.location.href = '#comments'
         }
      }
   </script>
</body>

</html>